Here is the exact, fully-structured, copy-paste-ready Replit implementation prompt for Agent.
It will instruct Replit to build the Summary Diagnostic Dashboard precisely as we designed ‚Äî nothing extra, everything necessary.

‚∏ª

‚úÖ REPLIT IMPLEMENTATION PROMPT

Paste the entire block below into Replit Agent:

‚∏ª

REPLIT: IMPLEMENT THE SUMMARY DIAGNOSTIC DASHBOARD

You will implement a collapsible Summary Diagnostic Dashboard inside the existing hidden diagnostics suite (opened with CTRL+SHIFT+D).

This dashboard must surface high-value stability and solver metrics, be extremely lightweight, and remain diagnostic-focused. Avoid visualization features or new physics. Use only data already present in the solver, grid, or renderer.

‚∏ª

1. Create a new panel titled ‚ÄúSummary‚Äù inside Diagnostics

This goes at the top of the Diagnostics window, above the tab row (Solver / Check / Render / Internals).
It should be a collapsible container:

Summary Diagnostics
[ ‚ñº ] System Status Summary

Collapsed by default.

‚∏ª

2. Inside the Summary, implement these sections

A. Stability Badge (top of card)

Compute a stability classification using existing metrics.

Use:
	‚Ä¢	ŒîE_abs = abs(energyDelta)
	‚Ä¢	variance = sigma2
	‚Ä¢	varianceDerivative = ds2_dt
	‚Ä¢	curvatureMean
	‚Ä¢	thresholds listed below

Show a badge:

üü¢ Stable
üü° Borderline
üî¥ Unstable

Classification Rules

(Please implement as constants at the top of the diagnostic file)

const ENERGY_DRIFT_THRESHOLD = 0.02;       // |ŒîE| above this = unstable
const VARIANCE_SPIKE_THRESHOLD = 0.0015;   // variance derivative above = borderline/unstable
const CURVATURE_SPIKE_THRESHOLD = 0.015;   // mean curvature above = unstable
const BORDERLINE_MARGIN = 0.60;            // if values close to thresholds

Stable = all below thresholds
Borderline = within 60‚Äì100% of threshold
Unstable = exceeds any threshold

‚∏ª

B. Primary Summary Metrics (always visible inside Summary)

Create a compact grid with labels on left, values on right.

Required fields:

Energy (E‚Çú):           <energy>
ŒîE:                    <energyDelta>
Variance (œÉ¬≤):         <sigma2>
Variance Trend (dœÉ¬≤/dt): <ds2_dt>
Max Gradient:          <gradMax>
Curvature Mean:        <curvatureMean>
Frame Hash:            <frameHash>
Determinism Sync:      <true/false>

Format to 3‚Äì5 significant digits.
Color-code only if the stability badge is RED (then values exceeding thresholds can appear amber).

‚∏ª

3. Warnings Block (shown only when triggered)

Below the primary metrics, create:

‚ö†Ô∏è Warnings
- High Energy Drift
- Curvature Spike
- Determinism Divergence
- Rapid Variance Change

Show only the warnings whose conditions are true.

Conditions:

High Energy Drift ‚Üí abs(ŒîE) > ENERGY_DRIFT_THRESHOLD
Curvature Spike ‚Üí curvatureMean > CURVATURE_SPIKE_THRESHOLD
Determinism Divergence ‚Üí determinismSync == false
Rapid Variance Change ‚Üí ds2_dt > VARIANCE_SPIKE_THRESHOLD


‚∏ª

4. Optional Sparkline for ŒîE Trend (very small)

A tiny 40‚Äì60px horizontal sparkline using the last N (e.g., 60) ŒîE values.
Do NOT add axes, labels, or UI complexity.
Render inline with:

Energy Trend:
[ ‚ñë‚ñö‚ñû‚ñà‚ññ‚ñù‚ñó‚ñò‚ñô‚ñû‚ñõ ... ]

If implementing Sparkline introduces complexity, you may fallback to a simple text trend indicator:

Energy Trend: rising / falling / stable


‚∏ª

5. Collapsible ‚ÄúAdvanced‚Äù Section

Contains deeper metrics already computed in Internals/Solver. Do not add new math.

Advanced Metrics  [‚ñº]
- Curvature Min / Max
- Gradient Min / Max
- Laplacian Mean
- Grid Mean / Std
- Last 20 Frame Hashes (scrollable)

Collapsed by default.

‚∏ª

6. Integration Requirements
	1.	Must appear only when CTRL+SHIFT+D is pressed (existing shortcut).
	2.	Must not interfere with solver timing or rendering loops.
	3.	Must not alter any physics or numerical computations.
	4.	Summary panel is read-only ‚Äî no buttons, no sliders.
	5.	All metrics are pulled from existing solver state objects.
	6.	Use the existing UI style tokens and dark-mode aesthetic.

‚∏ª

7. File Changes

Wherever diagnostics UI is defined (likely a component such as DiagnosticsPanel.jsx or equivalent):
	‚Ä¢	Add the Summary section at the top.
	‚Ä¢	Add stability classifier helper.
	‚Ä¢	Add warning evaluation function.
	‚Ä¢	Add sparkline helper or fallback text trend.
	‚Ä¢	Ensure metrics auto-update at the same rate as the solver display.

If the diagnostics system is modular, place all new logic in a new file:

/src/components/diagnostics/SummaryDiagnostics.js

And import it into the main diagnostics panel.

‚∏ª

8. Testing Checklist (Replit should run these automatically)

Confirm:
	‚Ä¢	Summary appears and collapses properly.
	‚Ä¢	Stability badge updates live during simulation.
	‚Ä¢	Warning flags appear only when thresholds are crossed.
	‚Ä¢	Determinism sync correctly reports divergence during the determinism test.
	‚Ä¢	No FPS drop.
	‚Ä¢	No new console errors.
	‚Ä¢	Summary panel does not overflow layout or resize main UI.

‚∏ª

9. Do NOT add anything else

No:
	‚Ä¢	new regimes
	‚Ä¢	new overlays
	‚Ä¢	new physics
	‚Ä¢	color remaps
	‚Ä¢	animations
	‚Ä¢	tutorials
	‚Ä¢	parameter tuning assistants

This update is strictly the Summary Diagnostic Dashboard.

‚∏ª

Please implement exactly this. After completion, show me the updated UI screenshots and report any assumptions or implementation details you had to infer.

‚∏ª

END OF PROMPT

‚∏ª

When you paste this into Replit, it will know exactly what to do and won‚Äôt drift into unnecessary features.

Ready whenever you are.